<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Kalkulator CNC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00f4e2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
        :root {
            --primary: #00f4e2;
            --secondary: #7c4dff;
            --background: #0a192f;
        }

        body {
            font-family: 'Inter', system-ui, Arial, sans-serif;
            background: var(--background);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            text-align: center;
            margin: 1.5rem 0 1rem 0;
            font-size: 2.5rem;
            font-weight: 900;
            color: #00f4e2;
            background: linear-gradient(270deg, #00f4e2, #7c4dff, #00f4e2);
            background-size: 600% 600%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientAnimation 8s ease infinite;
            text-shadow: 0 0 2px #00f4e2, 0 0 4px #7c4dff, 0 0 6px #00f4e2;
            letter-spacing: 2px;
            user-select: none;
        }

        @keyframes gradientAnimation {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }

        /* Navigation Menu */
        .nav-container {
            width: 100%;
            max-width: 460px;
            margin: 0 auto 1.5rem auto;
            display: flex;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 0.5rem;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(0, 244, 226, 0.15);
        }

        .nav-tab {
            flex: 1;
            padding: 0.8rem 1rem;
            background: transparent;
            border: none;
            color: #ccc;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 15px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            color: var(--primary);
            background: rgba(0, 244, 226, 0.1);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 244, 226, 0.3);
        }

        .nav-tab.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Main Container */
        .main-container {
            width: 100%;
            max-width: 460px;
            margin: 0 auto;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            background: rgba(255, 255, 255, 0.07);
            padding: 2.2rem 1rem 2.3rem 1rem;
            border-radius: 32px;
            backdrop-filter: blur(18px);
            box-shadow: 0 22px 60px -14px rgba(0, 244, 226, 0.13);
            border: 3px solid rgba(0, 244, 226, 0.22);
            margin-bottom: 2rem;
            transition: border-color 0.3s;
        }

        .container:hover {
            border-color: #00f4e2;
        }

        .module {
            padding: 1.1rem 0.7rem;
            border-radius: 18px;
            background: linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
            box-shadow: 0 4px 14px -8px rgba(0, 244, 226, 0.11);
        }

        h2 {
            color: var(--primary);
            margin: 0 0 1.1rem 0;
            font-size: 1.23rem;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 0.45rem;
            color: #ccc;
            font-weight: 500;
            font-size: 0.91rem;
        }

        input, select {
            padding: 0.8rem 1rem;
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(0, 244, 226, 0.1);
        }

        input::placeholder {
            color: #888;
        }

        select option {
            background: var(--background);
            color: white;
        }

        .shape-fields {
            margin-top: 1rem;
        }

        .result {
            margin-top: 1.2rem;
            padding: 1.1rem;
            background: linear-gradient(135deg, rgba(0, 244, 226, 0.08) 0%, rgba(124, 77, 255, 0.08) 100%);
            border: 2px solid rgba(0, 244, 226, 0.2);
            border-radius: 15px;
            font-weight: 600;
            font-size: 1.1rem;
            text-align: center;
            backdrop-filter: blur(10px);
            min-height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .clear-button {
            padding: 0.9rem 1.8rem;
            background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
        }

        .clear-button:hover {
            background: linear-gradient(135deg, #ff3838 0%, #ff2828 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
        }

        .footer {
            text-align: center;
            margin: 2rem 0 1rem 0;
            color: #888;
            font-size: 0.85rem;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            .main-container {
                margin: 0.5rem;
                width: calc(100% - 1rem);
            }

            .nav-container {
                margin: 0.5rem auto 1.5rem auto;
                width: calc(100% - 1rem);
            }

            .container {
                padding: 1.5rem 0.8rem;
            }

            .header {
                font-size: 2rem;
                margin: 1rem 0;
            }

            h2 {
                font-size: 1.1rem;
            }

            .module {
                padding: 0.9rem 0.5rem;
            }

            .nav-tab {
                font-size: 0.85rem;
                padding: 0.7rem 0.8rem;
            }
        }

        @media (max-width: 360px) {
            .header {
                font-size: 1.8rem;
            }
            
            .container {
                padding: 1.2rem 0.6rem;
            }

            .nav-tab {
                font-size: 0.8rem;
                padding: 0.6rem 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">Kalkulator CNC</div>

    <!-- Navigation Menu -->
    <div class="nav-container">
        <button class="nav-tab active" onclick="showTab('parameters')">
            üîß Parametry skrawania
        </button>
        <button class="nav-tab" onclick="showTab('weight')">
            ‚öñÔ∏è Kalkulator wagi
        </button>
    </div>

    <div class="main-container">
        <!-- Tab 1: Parameters Calculator -->
        <div id="parametersTab" class="tab-content active">
            <div class="container">
                <!-- Modu≈Ç 1: Obroty -->
                <div class="module">
                    <h2>‚ö° Obroty</h2>
                    <div class="input-group">
                        <label>Prƒôdko≈õƒá skrawania Vc [m/min]</label>
                        <input type="number" id="vc" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>≈örednica narzƒôdzia D [mm]</label>
                        <input type="number" id="diameter" step="0.1">
                    </div>
                    <div class="result" id="rpmResult"></div>
                </div>

                <!-- Modu≈Ç 2: Posuw minutowy -->
                <div class="module">
                    <h2>üöÄ Posuw minutowy</h2>
                    <div class="input-group">
                        <label>Posuw na zƒÖb fz [mm/zƒÖb]</label>
                        <input type="number" id="fz" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Liczba zƒôb√≥w Z</label>
                        <input type="number" id="teeth">
                    </div>
                    <div class="input-group">
                        <label>Obroty n [obr/min]</label>
                        <input type="number" id="rpm" readonly>
                    </div>
                    <div class="result" id="feedResult"></div>
                </div>

                <!-- Modu≈Ç 3: Posuw w centrum -->
                <div class="module">
                    <h2>üéØ Posuw centralny</h2>
                    <div class="input-group">
                        <label>≈örednica narzƒôdzia D1 [mm]</label>
                        <input type="number" id="toolDia" step="0.1" readonly>
                    </div>
                    <div class="input-group">
                        <label>≈örednica gwintu D2 [mm]</label>
                        <input type="number" id="holeDia" step="0.1">
                    </div>
                    <div class="result" id="centerFeedResult"></div>
                </div>

                <button class="clear-button" onclick="clearParametersTab()">Wyczy≈õƒá</button>
            </div>
        </div>

        <!-- Tab 2: Weight Calculator -->
        <div id="weightTab" class="tab-content">
            <div class="container">
                <div class="module">
                    <h2>‚öñÔ∏è Kalkulator wagi przygot√≥wki</h2>
                    
                    <!-- Wyb√≥r kszta≈Çtu -->
                    <div class="input-group">
                        <label>Kszta≈Çt p√≥≈Çfabrykatu</label>
                        <select id="shapeType" onchange="updateShapeFields()">
                            <option value="rod">Wa≈Çek</option>
                            <option value="tube">Rura</option>
                            <option value="flat">P≈Çaskownik</option>
                        </select>
                    </div>

                    <!-- Pola dla wa≈Çka -->
                    <div id="rodFields" class="shape-fields">
                        <div class="input-group">
                            <label>≈örednica zewnƒôtrzna [mm]</label>
                            <input type="number" id="rodDiameter" step="0.1" oninput="calculateWeight()">
                        </div>
                        <div class="input-group">
                            <label>D≈Çugo≈õƒá [mm]</label>
                            <input type="number" id="rodLength" step="0.1" oninput="calculateWeight()">
                        </div>
                    </div>

                    <!-- Pola dla rury -->
                    <div id="tubeFields" class="shape-fields" style="display: none;">
                        <div class="input-group">
                            <label>≈örednica zewnƒôtrzna [mm]</label>
                            <input type="number" id="tubeOuterDia" step="0.1" oninput="calculateWeight()">
                        </div>
                        <div class="input-group">
                            <label>≈örednica wewnƒôtrzna [mm]</label>
                            <input type="number" id="tubeInnerDia" step="0.1" oninput="calculateWeight()">
                        </div>
                        <div class="input-group">
                            <label>D≈Çugo≈õƒá [mm]</label>
                            <input type="number" id="tubeLength" step="0.1" oninput="calculateWeight()">
                        </div>
                    </div>

                    <!-- Pola dla p≈Çaskownika -->
                    <div id="flatFields" class="shape-fields" style="display: none;">
                        <div class="input-group">
                            <label>Wymiar A [mm]</label>
                            <input type="number" id="flatA" step="0.1" oninput="calculateWeight()">
                        </div>
                        <div class="input-group">
                            <label>Wymiar B [mm]</label>
                            <input type="number" id="flatB" step="0.1" oninput="calculateWeight()">
                        </div>
                        <div class="input-group">
                            <label>D≈Çugo≈õƒá [mm]</label>
                            <input type="number" id="flatLength" step="0.1" oninput="calculateWeight()">
                        </div>
                    </div>

                    <!-- Wyb√≥r materia≈Çu -->
                    <div class="input-group">
                        <label>Materia≈Ç</label>
                        <select id="materialType" onchange="calculateWeight()">
                            <option value="">Wybierz materia≈Ç</option>
                        </select>
                    </div>

                    <!-- Ilo≈õƒá sztuk -->
                    <div class="input-group">
                        <label>Ilo≈õƒá sztuk</label>
                        <input type="number" id="quantity" value="1" min="1" step="1" oninput="calculateWeight()">
                    </div>

                    <div class="result" id="weightResult"></div>
                </div>

                <button class="clear-button" onclick="clearWeightTab()">Wyczy≈õƒá</button>
            </div>
        </div>
    </div>

    <div class="footer">
        Copyright ¬© 2025 Damian Drewniak | Parametry skrawania & Kalkulator wagi
    </div>

    <script>
        // Navigation functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            if (tabName === 'parameters') {
                document.getElementById('parametersTab').classList.add('active');
                document.querySelector('.nav-tab:first-child').classList.add('active');
            } else if (tabName === 'weight') {
                document.getElementById('weightTab').classList.add('active');
                document.querySelector('.nav-tab:last-child').classList.add('active');
            }
        }

        // ORYGINALNY KOD PARAMETR√ìW CNC - PRZYWR√ìCONY
        const inputs = document.querySelectorAll('#parametersTab input');
        inputs.forEach(input => input.addEventListener('input', calculateAll));

        // Automatyczna aktualizacja ≈õrednicy narzƒôdzia
        document.getElementById('diameter').addEventListener('input', function() {
            document.getElementById('toolDia').value = this.value;
        });

        // Clear functions
        function clearParametersTab() {
            inputs.forEach(input => {
                input.value = '';
                if (input.id === 'toolDia') input.value = '';
            });
            document.getElementById('rpmResult').textContent = '';
            document.getElementById('feedResult').textContent = '';
            document.getElementById('centerFeedResult').textContent = '';
        }

        function clearWeightTab() {
            const weightInputs = document.querySelectorAll('#weightTab input');
            weightInputs.forEach(input => {
                if (input.id !== 'quantity') {
                    input.value = '';
                }
            });
            
            document.getElementById('shapeType').value = 'rod';
            document.getElementById('materialType').value = '';
            document.getElementById('quantity').value = '1';
            updateShapeFields();
            document.getElementById('weightResult').innerHTML = '';
        }

        // ORYGINALNE FUNKCJE KALKULATORA CNC
        function calculateAll() {
            const rpm = calculateRPM();
            const feed = calculateFeed();
            calculateCenterFeed(feed);
        }

        function calculateRPM() {
            const vc = parseFloat(document.getElementById('vc').value);
            const D = parseFloat(document.getElementById('diameter').value);

            if(vc && D) {
                const n = (vc * 1000) / (Math.PI * D);
                document.getElementById('rpm').value = n.toFixed(0);
                document.getElementById('rpmResult').textContent = `üåÄ ${n.toFixed(0)} obr/min`;
                return n;
            }
            document.getElementById('rpmResult').textContent = '';
            return null;
        }

        function calculateFeed() {
            const fz = parseFloat(document.getElementById('fz').value);
            const Z = parseFloat(document.getElementById('teeth').value);
            const n = parseFloat(document.getElementById('rpm').value);

            if(fz && Z && n) {
                const f_mm_min = fz * Z * n;
                document.getElementById('feedResult').textContent = `üöÄ ${f_mm_min.toFixed(1)} mm/min`;
                return f_mm_min;
            }
            document.getElementById('feedResult').textContent = '';
            return null;
        }

        function calculateCenterFeed(feed) {
            const D1 = parseFloat(document.getElementById('toolDia').value);
            const D2 = parseFloat(document.getElementById('holeDia').value);

            if(feed && D1 && D2 && D2 > D1) {
                const fc = (feed * (D2 - D1)) / D2;
                document.getElementById('centerFeedResult').textContent = 
                    `üéØ ${fc.toFixed(1)} mm/min`;
            } else {
                document.getElementById('centerFeedResult').textContent = '';
            }
        }

        // KALKULATOR WAGI - BEZ ZMIAN
        const materials = {
            "S235/S355": { density: 7.85, description: "Stal konstrukcyjna" },
            "40H/40HM": { density: 7.85, description: "Stal konstrukcyjna wƒôglowa" },
            "C45": { density: 7.85, description: "Stal wƒôglowa" },
            "NC11LV": { density: 7.85, description: "Stal nierdzewna martenzytyczna" },
            "AISI 304": { density: 8.00, description: "Stal nierdzewna austenityczna" },
            "AISI 316": { density: 8.00, description: "Stal nierdzewna austenityczna" },
            "4H13": { density: 7.75, description: "Stal nierdzewna martenzytyczna" },
            "Aluminium PA4": { density: 2.70, description: "Stop aluminium" },
            "Aluminium PA13": { density: 2.70, description: "Stop aluminium" },
            "POM-C": { density: 1.41, description: "Polioxymetan kopolimer" }
        };

        function initializeWeightCalculator() {
            const materialSelect = document.getElementById('materialType');
            materialSelect.innerHTML = '<option value="">Wybierz materia≈Ç</option>';
            
            for (const [materialName, materialData] of Object.entries(materials)) {
                const option = document.createElement('option');
                option.value = materialName;
                option.textContent = `${materialName}`;
                materialSelect.appendChild(option);
            }
        }

        function updateShapeFields() {
            const shapeType = document.getElementById('shapeType').value;
            
            document.getElementById('rodFields').style.display = 'none';
            document.getElementById('tubeFields').style.display = 'none';
            document.getElementById('flatFields').style.display = 'none';
            
            document.getElementById(shapeType + 'Fields').style.display = 'block';
            
            calculateWeight();
        }

        function calculateWeight() {
            const shapeType = document.getElementById('shapeType').value;
            const materialType = document.getElementById('materialType').value;
            const quantity = parseFloat(document.getElementById('quantity').value) || 1;
            
            const resultDiv = document.getElementById('weightResult');
            
            if (!materialType) {
                resultDiv.innerHTML = '';
                return;
            }
            
            const density = materials[materialType].density;
            let volume = 0;
            let isValid = false;
            
            try {
                if (shapeType === 'rod') {
                    const diameter = parseFloat(document.getElementById('rodDiameter').value);
                    const length = parseFloat(document.getElementById('rodLength').value);
                    
                    if (diameter > 0 && length > 0) {
                        volume = Math.PI * Math.pow(diameter / 2, 2) * length / 1000;
                        isValid = true;
                    }
                } else if (shapeType === 'tube') {
                    const outerDia = parseFloat(document.getElementById('tubeOuterDia').value);
                    const innerDia = parseFloat(document.getElementById('tubeInnerDia').value);
                    const length = parseFloat(document.getElementById('tubeLength').value);
                    
                    if (outerDia > 0 && innerDia >= 0 && length > 0 && outerDia > innerDia) {
                        volume = Math.PI * (Math.pow(outerDia / 2, 2) - Math.pow(innerDia / 2, 2)) * length / 1000;
                        isValid = true;
                    }
                } else if (shapeType === 'flat') {
                    const a = parseFloat(document.getElementById('flatA').value);
                    const b = parseFloat(document.getElementById('flatB').value);
                    const length = parseFloat(document.getElementById('flatLength').value);
                    
                    if (a > 0 && b > 0 && length > 0) {
                        volume = a * b * length / 1000;
                        isValid = true;
                    }
                }
                
                if (isValid && volume > 0) {
                    const totalWeight = volume * density * quantity;
                    const weightKg = totalWeight / 1000;
                    
                    resultDiv.innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 1.4em; color: var(--primary); margin-bottom: 0.5rem;">
                                <strong>Masa ca≈Çkowita</strong>
                            </div>
                            <div style="font-size: 1.8em; font-weight: bold; color: white;">
                                ${weightKg.toFixed(3)} kg
                            </div>
                            <div style="font-size: 0.9em; color: #ccc; margin-top: 0.5rem;">
                                ${totalWeight.toFixed(1)} g | ${quantity} szt. | ${materialType}
                            </div>
                            <div style="font-size: 0.85em; color: #aaa; margin-top: 0.3rem;">
                                Objƒôto≈õƒá: ${volume.toFixed(2)} cm¬≥ | Gƒôsto≈õƒá: ${density} g/cm¬≥
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = '<div style="text-align: center; color: #999;">Wprowad≈∫ prawid≈Çowe warto≈õci</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<div style="text-align: center; color: #ff6b6b;">B≈ÇƒÖd w obliczeniach</div>';
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeWeightCalculator();
        });
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>